function attachUploader(){var o=$("div#upload").data("path"),e=$("div#upload").data("type");new Dropzone("div#upload",{url:"/upload/do/"+o,maxFilesize:10,addRemoveLinks:!0,acceptedFiles:e||"image/*",init:function(){this.on("success",function(o,e){o.response=e}),this.on("removedfile",function(o){var e=o.response;e&&$.get("/upload/remove/"+e.mask)}),this.on("error",function(){console.log(arguments)})}})}Dropzone.autoDiscover=!1,$("div#upload").length>0&&attachUploader(),$(".remove_uploaded").click(function(o){var e=$(this),a=e.parent(),t=e.data("id");return o.preventDefault(),bootbox.confirm("Remove attached file?",function(o){o&&$.get("/upload/remove/"+t,function(){a.remove()})}),!1}),$(".view_uploaded").click(function(){var o=$(this),e=o.data("url");bootbox.alert('<img src="'+e+'" />',function(){}).addClass("upload-preview")});